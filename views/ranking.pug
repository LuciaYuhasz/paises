extends layout

block content
     #rankingContainer
      h2 🏆 Ranking de los mejores jugadores
      ol#rankingList
      button#backToGameButton.btn.btn-primary.btn-lg.px-4.py-2.mt-4.shadow
        i.bi.bi-arrow-counterclockwise.me-2
        | Volver a jugar


block scripts 
    script.
      fetch('/api/ranking')
        .then(res => res.json())
        .then(data => {
           console.log("📦 Datos del ranking recibidos:", data);

          const rankingList = document.getElementById('rankingList');
          rankingList.innerHTML = "";

          data.forEach((player, index) => {
            const listItem = document.createElement('li');

            // Añadir emoji según la posición
            let medal = "";
            if (index === 0) medal = "🥇";
            else if (index === 1) medal = "🥈";
            else if (index === 2) medal = "🥉";

            // Armar contenido del <li>
            listItem.innerHTML = `<strong>${index + 1}.</strong> ${medal} ${player.player} - ${player.score} pts`;

            // Agregar clase según posición
            if (index === 0) listItem.classList.add('top-1');
            else if (index === 1) listItem.classList.add('top-2');
            else if (index === 2) listItem.classList.add('top-3');

            rankingList.appendChild(listItem);
          });
        })
        .catch(err => {
          console.error("Error al obtener el ranking:", err);
        });

      document.getElementById('backToGameButton').onclick = () => {
        window.location.href = "/";
        
      };
